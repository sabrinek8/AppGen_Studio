import React, { createContext, useContext, useState, useEffect } from 'react';

// All translations for the application
const translations = {
  FR: {
    // Navigation
    generator: 'G√©n√©rateur',
    preview: 'Aper√ßu',
    manage: 'Gestion',
    
    // Generator Section
    generatorTitle: 'G√©n√©rateur IA',
    generatorSubtitle: 'Cr√©ez votre projet React personnalis√© avec l\'intelligence artificielle',
    projectDescription: 'Description du projet',
    projectDescriptionPlaceholder: 'D√©crivez votre application React id√©ale... Ex: Une application de gestion de t√¢ches avec authentification, cr√©ation de projets, et tableau de bord analytique.',
    specificFeatures: 'Fonctionnalit√©s sp√©cifiques (optionnel)',
    specificFeaturesPlaceholder: `Listez les fonctionnalit√©s sp√©cifiques souhait√©es...
‚Ä¢ Interface utilisateur moderne avec dark mode
‚Ä¢ Gestion d'√©tat avec contexte React
‚Ä¢ Animations fluides et responsive design
‚Ä¢ Int√©gration API REST`,
    referenceFiles: 'Fichiers de r√©f√©rence (optionnel)',
    generateProject: 'G√©n√©rer le projet',
    generating: 'G√©n√©ration...',
    fileUploadTip: 'Les fichiers upload√©s seront analys√©s par l\'IA pour mieux comprendre votre style de code et vos pr√©f√©rences architecturales.',
    dragDropText: 'Glissez-d√©posez vos fichiers ici ou cliquez pour s√©lectionner',
    supportedFormats: 'Formats support√©s : .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf (max 10MB)',
    filesSelected: 'Fichiers s√©lectionn√©s',
    
    // Preview Section
    previewTitle: 'Projet Interactif',
    previewSubtitle: 'Aper√ßu et modification en temps r√©el avec l\'assistant IA',
    codeEditor: '√âditeur de Code',
    aiAssistant: 'Assistant IA',
    previewTip: 'Passez √† l\'onglet "Assistant IA" pour modifier votre projet en parlant naturellement !',
    
    // Chat Interface
    chatTitle: 'Assistant IA',
    chatSubtitle: 'Discutez avec l\'IA pour modifier votre projet en temps r√©el',
    generateFirstProject: 'G√©n√©rez d\'abord un projet',
    aiAvailableAfter: 'L\'assistant IA sera disponible apr√®s la g√©n√©ration de votre projet',
    greeting: 'üëã Bonjour ! Je suis votre assistant IA.',
    chatDescription: 'D√©crivez-moi les modifications que vous souhaitez apporter √† votre projet :',
    quickSuggestions: 'üí° Suggestions rapides :',
    chatPlaceholder: 'D√©crivez la modification souhait√©e... (Entr√©e pour envoyer)',
    orangeWorking: 'L\'assistant Orange travaille sur votre demande...',
    suggestions: [
      "Change la couleur de fond en bleu",
      "Ajoute un logo avec une ic√¥ne üöÄ",
      "Met un th√®me sombre",
      "Change la taille des boutons",
      "Ajoute une animation",
      "Modifie la typographie",
      "Ajoute des ombres et effets",
      "Change l'espacement des √©l√©ments"
    ],
    
    // Management Section
    managementTitle: 'Gestion de Projet',
    managementSubtitle: 'G√©rez vos projets, exportez vos donn√©es et configurez votre environnement de travail',
    projectManagement: 'Gestion des Projets',
    conversationHistory: 'Historique des Conversations',
    systemConfiguration: 'Configuration Syst√®me',
    
    importProject: 'Importer un projet',
    importProjectDesc: 'Chargez un projet existant depuis un fichier JSON',
    chooseFile: 'Choisir un fichier',
    
    exportProjectJSON: 'Exporter le projet (JSON)',
    exportProjectJSONDesc: 'Sauvegardez votre projet au format JSON',
    downloadJSON: 'T√©l√©charger JSON',
    
    exportProjectZIP: 'Exporter le projet (ZIP)',
    exportProjectZIPDesc: 'T√©l√©chargez votre projet avec la structure de dossiers',
    downloadZIP: 'T√©l√©charger ZIP',
    
    exportChatHistory: 'Exporter l\'historique de chat',
    exportChatHistoryDesc: 'Sauvegardez vos conversations avec l\'IA',
    exportHistory: 'Exporter l\'historique',
    
    clearChatHistory: 'Effacer l\'historique de chat',
    clearChatHistoryDesc: 'Supprimer les conversations pour ce projet',
    clearChatHistoryNoProject: 'G√©n√©rez d\'abord un projet pour activer cette option',
    clearHistory: 'Effacer l\'historique',
    noActiveProject: 'Aucun projet actif',
    
    resetEverything: 'R√©initialiser tout',
    resetEverythingDesc: 'Revenir au projet par d√©faut et effacer toutes les donn√©es',
    reset: 'R√©initialiser',
    
    currentProject: 'Projet actuel :',
    autoSaved: 'L\'historique est automatiquement sauvegard√© localement.',
    resetWarning: '‚ö†Ô∏è Attention : Cette action est irr√©versible et supprimera toutes vos donn√©es',
    
    // Success Messages
    projectGenerated: 'Projet g√©n√©r√© avec succ√®s !',
    projectImported: 'Projet import√© avec succ√®s !',
    projectExportedZIP: 'Projet export√© en ZIP avec succ√®s.',
    filesDownloaded: 'Fichiers t√©l√©charg√©s avec succ√®s ! üéâ',
    filesDownloadedIndividually: 'Tous les fichiers ont √©t√© t√©l√©charg√©s individuellement.',
    projectReset: 'Projet r√©initialis√© avec succ√®s.',
    chatHistoryExported: 'Historique de chat export√© avec succ√®s !',
    chatHistoryCleared: 'Historique de chat effac√© avec succ√®s !',
    
    // Error Messages
    generationError: 'Erreur lors de la g√©n√©ration :',
    projectDescriptionRequired: 'Veuillez entrer une description du projet.',
    noProjectToExport: 'Aucun projet √† exporter. Veuillez d\'abord g√©n√©rer ou importer un projet.',
    projectImportError: 'Erreur lors de l\'importation du projet. V√©rifiez le format JSON.',
    fileReadError: 'Erreur lors de la lecture du fichier.',
    exportError: 'Erreur lors de l\'export du projet: ',
    resetError: 'Erreur lors de la r√©initialisation du projet.',
    connectionError: '‚ùå Erreur de connexion. V√©rifiez que le serveur backend fonctionne.',
    errorOccurred: 'Une erreur est survenue',
    clearHistoryError: 'Erreur lors de l\'effacement de l\'historique.',
    zipFallbackMessage: 'Erreur ZIP, utilisation du fallback:',
    unableToStoreProject: 'Impossible de stocker le projet import√© pour le chat:',
    
    // Warning Messages
    projectImportedChatWarning: 'Projet import√© mais impossible de l\'associer au chat.',
    noActiveProjectChat: 'Aucun projet actif pour effacer l\'historique de chat.',
    noActiveProjectExport: 'Aucun projet actif pour exporter l\'historique de chat.',
    noChatHistory: 'Aucun historique de chat trouv√© pour ce projet.',
    
    // Confirmation Messages
    resetConfirmation: '√ätes-vous s√ªr de vouloir r√©initialiser le projet ?',
    clearChatConfirmation: '√ätes-vous s√ªr de vouloir effacer l\'historique de chat pour ce projet ?',
    
    // Console Messages
    generationErrorConsole: 'Erreur lors de la g√©n√©ration:',
    exportDataConsole: 'Donn√©es du projet √† exporter:',
    fileCountConsole: 'Nombre de fichiers:',
    exportErrorConsole: 'Erreur lors de l\'export:',
    clearErrorConsole: 'Erreur lors de l\'effacement:',
    
    // File Upload
    fileAlreadyAdded: 'Ce fichier a d√©j√† √©t√© ajout√©.',
    fileReadingError: 'Erreur lors de la lecture du fichier: ',
    unsupportedFormat: 'Format de fichier non support√©. Formats accept√©s : .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf',
    fileTooLarge: 'Fichier trop volumineux. Taille maximale : ',
    removeFile: 'Supprimer le fichier',
    
    // Footer
    followUs: 'Suivez-nous',
    terms: 'Conditions g√©n√©rales',
    privacy: 'Confidentialit√©',
    accessibility: 'D√©claration d\'accessibilit√©',
    cookies: 'Politique de cookies',
  },
  
  EN: {
    // Navigation
    generator: 'Generator',
    preview: 'Preview',
    manage: 'Management',
    
    // Generator Section
    generatorTitle: 'AI Generator',
    generatorSubtitle: 'Create your custom React project with artificial intelligence',
    projectDescription: 'Project description',
    projectDescriptionPlaceholder: 'Describe your ideal React application... Ex: A task management application with authentication, project creation, and analytical dashboard.',
    specificFeatures: 'Specific features (optional)',
    specificFeaturesPlaceholder: `List the desired specific features...
‚Ä¢ Modern user interface with dark mode
‚Ä¢ State management with React context
‚Ä¢ Smooth animations and responsive design
‚Ä¢ REST API integration`,
    referenceFiles: 'Reference files (optional)',
    generateProject: 'Generate project',
    generating: 'Generating...',
    fileUploadTip: 'Uploaded files will be analyzed by AI to better understand your code style and architectural preferences.',
    dragDropText: 'Drag and drop your files here or click to select',
    supportedFormats: 'Supported formats: .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf (max 10MB)',
    filesSelected: 'Selected files',
    
    // Preview Section
    previewTitle: 'Interactive Project',
    previewSubtitle: 'Real-time preview and modification with AI assistant',
    codeEditor: 'Code Editor',
    aiAssistant: 'AI Assistant',
    previewTip: 'Switch to the "AI Assistant" tab to modify your project by speaking naturally!',
    
    // Chat Interface
    chatTitle: 'AI Assistant',
    chatSubtitle: 'Chat with AI to modify your project in real-time',
    generateFirstProject: 'Generate a project first',
    aiAvailableAfter: 'The AI assistant will be available after generating your project',
    greeting: 'üëã Hello! I am your AI assistant.',
    chatDescription: 'Describe the modifications you want to make to your project:',
    quickSuggestions: 'üí° Quick suggestions:',
    chatPlaceholder: 'Describe the desired modification... (Enter to send)',
    orangeWorking: 'Orange assistant is working on your request...',
    suggestions: [
      "Change background color to blue",
      "Add a logo with a üöÄ icon",
      "Add dark theme",
      "Change button size",
      "Add animation",
      "Modify typography",
      "Add shadows and effects",
      "Change element spacing"
    ],
    
    // Management Section
    managementTitle: 'Project Management',
    managementSubtitle: 'Manage your projects, export your data and configure your work environment',
    projectManagement: 'Project Management',
    conversationHistory: 'Conversation History',
    systemConfiguration: 'System Configuration',
    
    importProject: 'Import project',
    importProjectDesc: 'Load an existing project from a JSON file',
    chooseFile: 'Choose file',
    
    exportProjectJSON: 'Export project (JSON)',
    exportProjectJSONDesc: 'Save your project in JSON format',
    downloadJSON: 'Download JSON',
    
    exportProjectZIP: 'Export project (ZIP)',
    exportProjectZIPDesc: 'Download your project with folder structure',
    downloadZIP: 'Download ZIP',
    
    exportChatHistory: 'Export chat history',
    exportChatHistoryDesc: 'Save your conversations with AI',
    exportHistory: 'Export history',
    
    clearChatHistory: 'Clear chat history',
    clearChatHistoryDesc: 'Delete conversations for this project',
    clearChatHistoryNoProject: 'Generate a project first to enable this option',
    clearHistory: 'Clear history',
    noActiveProject: 'No active project',
    
    resetEverything: 'Reset everything',
    resetEverythingDesc: 'Return to default project and clear all data',
    reset: 'Reset',
    
    currentProject: 'Current project:',
    autoSaved: 'History is automatically saved locally.',
    resetWarning: '‚ö†Ô∏è Warning: This action is irreversible and will delete all your data',
    
    // Success Messages
    projectGenerated: 'Project generated successfully!',
    projectImported: 'Project imported successfully!',
    projectExportedZIP: 'Project exported as ZIP successfully.',
    filesDownloaded: 'Files downloaded successfully! üéâ',
    filesDownloadedIndividually: 'All files have been downloaded individually.',
    projectReset: 'Project reset successfully.',
    chatHistoryExported: 'Chat history exported successfully!',
    chatHistoryCleared: 'Chat history cleared successfully!',
    
    // Error Messages
    generationError: 'Generation error:',
    projectDescriptionRequired: 'Please enter a project description.',
    noProjectToExport: 'No project to export. Please generate or import a project first.',
    projectImportError: 'Error importing project. Check JSON format.',
    fileReadError: 'Error reading file.',
    exportError: 'Error exporting project: ',
    resetError: 'Error resetting project.',
    connectionError: '‚ùå Connection error. Check that the backend server is running.',
    errorOccurred: 'An error occurred',
    clearHistoryError: 'Error clearing history.',
    zipFallbackMessage: 'ZIP error, using fallback:',
    unableToStoreProject: 'Unable to store imported project for chat:',
    
    // Warning Messages
    projectImportedChatWarning: 'Project imported but unable to associate with chat.',
    noActiveProjectChat: 'No active project to clear chat history.',
    noActiveProjectExport: 'No active project to export chat history.',
    noChatHistory: 'No chat history found for this project.',
    
    // Confirmation Messages
    resetConfirmation: 'Are you sure you want to reset the project?',
    clearChatConfirmation: 'Are you sure you want to clear chat history for this project?',
    
    // Console Messages
    generationErrorConsole: 'Generation error:',
    exportDataConsole: 'Project data to export:',
    fileCountConsole: 'Number of files:',
    exportErrorConsole: 'Export error:',
    clearErrorConsole: 'Clear error:',
    
    // File Upload
    fileAlreadyAdded: 'This file has already been added.',
    fileReadingError: 'Error reading file: ',
    unsupportedFormat: 'Unsupported file format. Accepted formats: .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf',
    fileTooLarge: 'File too large. Maximum size: ',
    removeFile: 'Remove file',
    
    // Footer
    followUs: 'Follow us',
    terms: 'Terms and conditions',
    privacy: 'Privacy',
    accessibility: 'Accessibility statement',
    cookies: 'Cookie policy',
  },
  
  ES: {
    // Navigation
    generator: 'Generador',
    preview: 'Vista previa',
    manage: 'Gesti√≥n',
    
    // Generator Section
    generatorTitle: 'Generador IA',
    generatorSubtitle: 'Crea tu proyecto React personalizado con inteligencia artificial',
    projectDescription: 'Descripci√≥n del proyecto',
    projectDescriptionPlaceholder: 'Describe tu aplicaci√≥n React ideal... Ej: Una aplicaci√≥n de gesti√≥n de tareas con autenticaci√≥n, creaci√≥n de proyectos y panel anal√≠tico.',
    specificFeatures: 'Caracter√≠sticas espec√≠ficas (opcional)',
    specificFeaturesPlaceholder: `Lista las caracter√≠sticas espec√≠ficas deseadas...
‚Ä¢ Interfaz de usuario moderna con modo oscuro
‚Ä¢ Gesti√≥n de estado con contexto React
‚Ä¢ Animaciones suaves y dise√±o responsivo
‚Ä¢ Integraci√≥n API REST`,
    referenceFiles: 'Archivos de referencia (opcional)',
    generateProject: 'Generar proyecto',
    generating: 'Generando...',
    fileUploadTip: 'Los archivos subidos ser√°n analizados por IA para entender mejor tu estilo de c√≥digo y preferencias arquitect√≥nicas.',
    dragDropText: 'Arrastra y suelta tus archivos aqu√≠ o haz clic para seleccionar',
    supportedFormats: 'Formatos soportados: .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf (m√°x 10MB)',
    filesSelected: 'Archivos seleccionados',
    
    // Preview Section
    previewTitle: 'Proyecto Interactivo',
    previewSubtitle: 'Vista previa y modificaci√≥n en tiempo real con asistente IA',
    codeEditor: 'Editor de C√≥digo',
    aiAssistant: 'Asistente IA',
    previewTip: '¬°Cambia a la pesta√±a "Asistente IA" para modificar tu proyecto hablando naturalmente!',
    
    // Chat Interface
    chatTitle: 'Asistente IA',
    chatSubtitle: 'Chatea con IA para modificar tu proyecto en tiempo real',
    generateFirstProject: 'Genera un proyecto primero',
    aiAvailableAfter: 'El asistente IA estar√° disponible despu√©s de generar tu proyecto',
    greeting: 'üëã ¬°Hola! Soy tu asistente IA.',
    chatDescription: 'Describe las modificaciones que quieres hacer a tu proyecto:',
    quickSuggestions: 'üí° Sugerencias r√°pidas:',
    chatPlaceholder: 'Describe la modificaci√≥n deseada... (Enter para enviar)',
    orangeWorking: 'El asistente Orange est√° trabajando en tu solicitud...',
    suggestions: [
      "Cambia el color de fondo a azul",
      "A√±ade un logo con icono üöÄ",
      "Pon tema oscuro",
      "Cambia el tama√±o de los botones",
      "A√±ade animaci√≥n",
      "Modifica la tipograf√≠a",
      "A√±ade sombras y efectos",
      "Cambia el espaciado de elementos"
    ],
    
    // Management Section
    managementTitle: 'Gesti√≥n de Proyectos',
    managementSubtitle: 'Gestiona tus proyectos, exporta tus datos y configura tu entorno de trabajo',
    projectManagement: 'Gesti√≥n de Proyectos',
    conversationHistory: 'Historial de Conversaciones',
    systemConfiguration: 'Configuraci√≥n del Sistema',
    
    importProject: 'Importar proyecto',
    importProjectDesc: 'Cargar un proyecto existente desde archivo JSON',
    chooseFile: 'Elegir archivo',
    
    exportProjectJSON: 'Exportar proyecto (JSON)',
    exportProjectJSONDesc: 'Guardar tu proyecto en formato JSON',
    downloadJSON: 'Descargar JSON',
    
    exportProjectZIP: 'Exportar proyecto (ZIP)',
    exportProjectZIPDesc: 'Descargar tu proyecto con estructura de carpetas',
    downloadZIP: 'Descargar ZIP',
    
    exportChatHistory: 'Exportar historial de chat',
    exportChatHistoryDesc: 'Guardar tus conversaciones con IA',
    exportHistory: 'Exportar historial',
    
    clearChatHistory: 'Limpiar historial de chat',
    clearChatHistoryDesc: 'Eliminar conversaciones para este proyecto',
    clearChatHistoryNoProject: 'Genera un proyecto primero para activar esta opci√≥n',
    clearHistory: 'Limpiar historial',
    noActiveProject: 'Sin proyecto activo',
    
    resetEverything: 'Resetear todo',
    resetEverythingDesc: 'Volver al proyecto por defecto y borrar todos los datos',
    reset: 'Resetear',
    
    currentProject: 'Proyecto actual:',
    autoSaved: 'El historial se guarda autom√°ticamente localmente.',
    resetWarning: '‚ö†Ô∏è Advertencia: Esta acci√≥n es irreversible y eliminar√° todos tus datos',
    
    // Success Messages
    projectGenerated: '¬°Proyecto generado exitosamente!',
    projectImported: '¬°Proyecto importado exitosamente!',
    projectExportedZIP: 'Proyecto exportado en ZIP exitosamente.',
    filesDownloaded: '¬°Archivos descargados exitosamente! üéâ',
    filesDownloadedIndividually: 'Todos los archivos han sido descargados individualmente.',
    projectReset: 'Proyecto reseteado exitosamente.',
    chatHistoryExported: '¬°Historial de chat exportado exitosamente!',
    chatHistoryCleared: '¬°Historial de chat limpiado exitosamente!',
    
    // Error Messages
    generationError: 'Error en la generaci√≥n:',
    projectDescriptionRequired: 'Por favor ingresa una descripci√≥n del proyecto.',
    noProjectToExport: 'No hay proyecto para exportar. Por favor genera o importa un proyecto primero.',
    projectImportError: 'Error importando proyecto. Verifica el formato JSON.',
    fileReadError: 'Error leyendo archivo.',
    exportError: 'Error exportando proyecto: ',
    resetError: 'Error reseteando proyecto.',
    connectionError: '‚ùå Error de conexi√≥n. Verifica que el servidor backend est√© funcionando.',
    errorOccurred: 'Ocurri√≥ un error',
    clearHistoryError: 'Error limpiando historial.',
    zipFallbackMessage: 'Error ZIP, usando fallback:',
    unableToStoreProject: 'No se puede almacenar el proyecto importado para chat:',
    
    // Warning Messages
    projectImportedChatWarning: 'Proyecto importado pero no se pudo asociar con chat.',
    noActiveProjectChat: 'No hay proyecto activo para limpiar historial de chat.',
    noActiveProjectExport: 'No hay proyecto activo para exportar historial de chat.',
    noChatHistory: 'No se encontr√≥ historial de chat para este proyecto.',
    
    // Confirmation Messages
    resetConfirmation: '¬øEst√°s seguro de que quieres resetear el proyecto?',
    clearChatConfirmation: '¬øEst√°s seguro de que quieres limpiar el historial de chat para este proyecto?',
    
    // Console Messages
    generationErrorConsole: 'Error de generaci√≥n:',
    exportDataConsole: 'Datos del proyecto a exportar:',
    fileCountConsole: 'N√∫mero de archivos:',
    exportErrorConsole: 'Error de exportaci√≥n:',
    clearErrorConsole: 'Error de limpieza:',
    
    // File Upload
    fileAlreadyAdded: 'Este archivo ya ha sido a√±adido.',
    fileReadingError: 'Error leyendo archivo: ',
    unsupportedFormat: 'Formato de archivo no soportado. Formatos aceptados: .txt, .js, .jsx, .ts, .tsx, .css, .html, .json, .md, .xml, .pdf',
    fileTooLarge: 'Archivo demasiado grande. Tama√±o m√°ximo: ',
    removeFile: 'Remover archivo',
    
    // Footer
    followUs: 'S√≠guenos',
    terms: 'T√©rminos y condiciones',
    privacy: 'Privacidad',
    accessibility: 'Declaraci√≥n de accesibilidad',
    cookies: 'Pol√≠tica de cookies',
  }
};

// Translation Context
const TranslationContext = createContext();

// Translation Provider Component
export const TranslationProvider = ({ children }) => {
  const [currentLanguage, setCurrentLanguage] = useState(() => {
    const savedLanguage = localStorage.getItem('selectedLanguage');
    return savedLanguage && translations[savedLanguage] ? savedLanguage : 'FR';
  });

  useEffect(() => {
    localStorage.setItem('selectedLanguage', currentLanguage);
  }, [currentLanguage]);

  const t = (key, params = {}) => {
    let translation = translations[currentLanguage][key] || key;
    
    // Replace parameters in translation
    Object.keys(params).forEach(param => {
      translation = translation.replace(`{{${param}}}`, params[param]);
    });
    
    return translation;
  };

  const changeLanguage = (language) => {
    if (translations[language]) {
      setCurrentLanguage(language);
    }
  };

  return (
    <TranslationContext.Provider value={{
      currentLanguage,
      changeLanguage,
      t,
      availableLanguages: Object.keys(translations)
    }}>
      {children}
    </TranslationContext.Provider>
  );
};

// Hook to use translations
export const useTranslation = () => {
  const context = useContext(TranslationContext);
  if (!context) {
    throw new Error('useTranslation must be used within a TranslationProvider');
  }
  return context;
};